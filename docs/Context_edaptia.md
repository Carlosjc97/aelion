# CONTEXT.txt  Edaptia (versiÃ¯Â¿Â½n completa v2)

## QuÃ¯Â¿Â½ es

Edaptia convierte una duda especÃ¯Â¿Â½fica en un **plan corto y Ã¯Â¿Â½til** que cabe en tu agenda. En lugar de cursos eternos, te damos **micro-lecciones de 34 minutos** con pequeÃ¯Â¿Â½os retos que confirman tu avance. La **calibraciÃ¯Â¿Â½n inicial no es un examen**: solo nos ubica para recomendarte el camino correcto.

## Para quiÃ¯Â¿Â½n (ICP)

Profesionales y equipos que necesitan resultados rÃ¯Â¿Â½pidos en:

* **TecnologÃ¯Â¿Â½a** (p. ej., .NET/SQL).
* **Negocio/Marketing** (p. ej., analÃ¯Â¿Â½tica, mensajes de ventas).
* **Idiomas profesionales** (p. ej., inglÃ¯Â¿Â½s para trabajo).

Enfoque **ES-first / LATAM**, con ejemplos locales y tono cercano.

## Problemas que resolvemos

* Falta de tiempo y cursos largos que nunca se terminan.
* Contenido genÃ¯Â¿Â½rico que no se adapta al nivel.
* "ParÃ¯Â¿Â½lisis por teorÃ¯Â¿Â½a": mucho saber, poco hacer.
* Incertidumbre de si realmente estÃ¯Â¿Â½s progresando.

## Propuesta de valor (en cristiano)

* **Avanzas desde el dÃ¯Â¿Â½a 1.** Entras con un objetivo y sales con un plan accionable.
* **Aprendes a tu ritmo.** La calibraciÃ¯Â¿Â½n te ubica y los retos se ajustan a cÃ¯Â¿Â½mo te va.
* **Sin paja.** Cada mÃ¯Â¿Â½dulo tiene objetivo, ejemplo concreto y prÃ¯Â¿Â½ctica guiada.
* **Transparente.** Siempre ves tu progreso y el siguiente paso.
* **En tu idioma, con tu contexto.** Ejemplos LATAM, tono cercano, sin traducciones raras.

## Por quÃ¯Â¿Â½ NO usar Coursera/Udemy/ChatGPT

### L Alternativas tradicionales:
- Cursos de 40+ horas que nunca terminas
- Contenido genÃ¯Â¿Â½rico para "todos los niveles" (= para nadie)
- No sabes si estÃ¯Â¿Â½s progresando de verdad
- Consumo pasivo, sin validaciÃ¯Â¿Â½n

###  Por quÃ¯Â¿Â½ SÃ¯Â¿Â½ usar Edaptia:
- **2-3 semanas mÃ¯Â¿Â½ximo** por skill completo
- **Plan adaptado a TU nivel** desde minuto 1
- **ValidaciÃ¯Â¿Â½n constante:** sabes que avanzas
- **Accionable:** mÃ¯Â¿Â½dulos de 3-4 min que caben en tu dÃ¯Â¿Â½a
- **En espaÃ¯Â¿Â½ol**, con ejemplos LATAM

## CÃ¯Â¿Â½mo funciona (flujo MVP)

1. **Home** Ã¯Â¿Â½ botÃ¯Â¿Â½n "Generar plan con IA".
2. **CalibraciÃ¯Â¿Â½n corta** (610 preguntas, sin nota visible, < 3 min).
3. **Plan adaptado** a tu nivel: mÃ¯Â¿Â½dulos de 34 min; **primer bloque gratis**.
4. **Gate** (610 Ã¯Â¿Â½tems) que se ajusta a tu desempeÃ¯Â¿Â½o despuÃ¯Â¿Â½s de cada bloque.
5. **Mock corto** (5 preguntas) si elegiste entrevista/prÃ¯Â¿Â½ctica.
6. **Paywall claro** en 3 momentos: post-calibraciÃ¯Â¿Â½n, al abrir Mock, y al descargar **PDF** de apoyo.
7. **Recordatorios**: D+1 para seguir tu plan y **T12h** si dijiste que tienes una fecha objetivo.

## Casos de uso especÃ¯Â¿Â½ficos (ejemplos reales)

### =Ã¯Â¿Â½ Marketing Analyst que necesita SQL:
**SituaciÃ¯Â¿Â½n:** Puede hacer Excel pero necesita queries para BigQuery/Snowflake
- **DÃ¯Â¿Â½a 1:** CalibraciÃ¯Â¿Â½n Ã¯Â¿Â½ detectamos nivel "bÃ¯Â¿Â½sico-intermedio"
- **Semana 1:** MÃ¯Â¿Â½dulos de SELECT, WHERE, JOIN (3-4 min c/u)
- **Semana 2:** Agregaciones y subconsultas con ejemplos de marketing
- **Semana 3:** Mock con caso real (anÃ¯Â¿Â½lisis de campaÃ¯Â¿Â½a)
- **Resultado:** Puede hacer queries reales en su trabajo al dÃ¯Â¿Â½a siguiente

### =Ã¯Â¿Â½ Dev que cambia a .NET:
**SituaciÃ¯Â¿Â½n:** Conoce Java/Python, necesita aplicar a roles .NET
- **DÃ¯Â¿Â½a 1:** CalibraciÃ¯Â¿Â½n Ã¯Â¿Â½ detectamos nivel "intermedio en OOP"
- **Semana 1:** C# syntax y paradigmas .NET especÃ¯Â¿Â½ficos
- **Semana 2:** Entity Framework y APIs REST
- **Semana 3:** Mock de entrevista tÃ¯Â¿Â½cnica con preguntas reales
- **Resultado:** Confianza y conocimiento base para entrevistas .NET

### < Profesional que necesita inglÃ¯Â¿Â½s tÃ¯Â¿Â½cnico:
**SituaciÃ¯Â¿Â½n:** Lee documentaciÃ¯Â¿Â½n pero no puede participar en calls
- **DÃ¯Â¿Â½a 1:** CalibraciÃ¯Â¿Â½n Ã¯Â¿Â½ detectamos nivel "intermedio reading, bÃ¯Â¿Â½sico speaking"
- **Semana 1:** Vocabulario tÃ¯Â¿Â½cnico y frases comunes en reuniones
- **Semana 2:** Role-plays de situaciones reales (sprint planning, demos)
- **Semana 3:** Mock de presentaciÃ¯Â¿Â½n tÃ¯Â¿Â½cnica
- **Resultado:** Participa activamente en calls internacionales

## QuÃ¯Â¿Â½ incluye Premium (trial 7 dÃ¯Â¿Â½as Ã¯Â¿Â½ $4.99/mes)

### Gratis (siempre):
 CalibraciÃ¯Â¿Â½n completa
 Primer bloque del plan
 Ver roadmap de aprendizaje
L Resto de mÃ¯Â¿Â½dulos bloqueados
L Mock bloqueado
L PDF bloqueado

### Premium:
 Plan completo desbloqueado (12-15 mÃ¯Â¿Â½dulos)
 Mock prÃ¯Â¿Â½ctico para validar aprendizaje
 **Cheat-sheet PDF** descargable
 Guardado de progreso automÃ¯Â¿Â½tico
 Nuevos tracks cada mes
 Soporte prioritario

**Valor percibido:** "Menos que un cafÃ¯Â¿Â½ al dÃ¯Â¿Â½a, mejor que 3 cursos de Udemy que no terminas"

## SeÃ¯Â¿Â½ales de Ã¯Â¿Â½xito que medimos

### ConversiÃ¯Â¿Â½n:
* **Trial start rate e 6%** (de quienes completan calibraciÃ¯Â¿Â½n)
* **Trial Ã¯Â¿Â½ Pago e 45%** (realista para EdTech de calidad)
* **CAC orgÃ¯Â¿Â½nico < $5**

### Retention:
* **D7 e 12%** (usuarios activos despuÃ¯Â¿Â½s de 7 dÃ¯Â¿Â½as)
* **D30 e 25%** (usuarios activos despuÃ¯Â¿Â½s de 30 dÃ¯Â¿Â½as)
* **Completion rate e 40%** (completan el plan completo)

### Performance:
* **p95 plan_rendered < 4 s** (velocidad percibida)
* **Abandono calibration Ã¯Â¿Â½ plan < 8%**
* **Crash-free rate e 99.5%**

## Diferenciales frente a "cursos" tradicionales

* **Micro-aprendizaje con gates adaptativos** (no teorÃ¯Â¿Â½a infinita).
* **Primero utilidad, luego profundidad**: resolvemos la intenciÃ¯Â¿Â½n real del usuario.
* **ES/LATAM nativo e Ingles** (ejemplos y tono locales, no traducciones malas).
* **Tiempo respetado**: todo cabe en bloques de 34 min.
* **ValidaciÃ¯Â¿Â½n constante**: sabes exactamente dÃ¯Â¿Â½nde estÃ¯Â¿Â½s parado.
* **Accionable desde dÃ¯Â¿Â½a 1**: no "aprenderÃ¯Â¿Â½s", sino "ya puedes hacer X".

## Principios de producto (no negociables)

1. **No examinamos**, ubicamos. La calibraciÃ¯Â¿Â½n es para nosotros, no para juzgarte.
2. Siempre **muestra progreso** y el **siguiente paso** claro.
3. **Primer bloque gratis** visible antes de pedir pago (demuestra valor primero).
4. **Una sola hipÃ¯Â¿Â½tesis A/B** activa (paywall timing) para aprender rÃ¯Â¿Â½pido sin ruido.
5. **Accesible**: foco visible, objetivos tÃ¯Â¿Â½ctiles e44px, contraste suficiente (WCAG AA).
6. **Privado y seguro**: la correcciÃ¯Â¿Â½n vive en servidor; no filtramos respuestas correctas al cliente.
7. **RÃ¯Â¿Â½pido por diseÃ¯Â¿Â½o**: 500 ms de *skeleton*, p95 < 4 s para plan completo.

## QuÃ¯Â¿Â½ ya decidimos para el MVP

### Contenido:
* **Track inicial**: SQL para Marketing con banco de Ã¯Â¿Â½tems (100 preguntas calibradas).
* **Estructura**: CalibraciÃ¯Â¿Â½n Ã¯Â¿Â½ 3 bloques temÃ¯Â¿Â½ticos Ã¯Â¿Â½ Mock Ã¯Â¿Â½ PDF
* **ExtensiÃ¯Â¿Â½n**: 12-15 mÃ¯Â¿Â½dulos de 3-4 min c/u

#### Estructura detallada de mÃ¯Â¿Â½dulos:

**TRACK: SQL para Marketing**
Total: 6 mÃ¯Â¿Â½dulos Ã¯Â¿Â½ 22 lecciones = ~3.5 horas

**MÃ¯Â¿Â½DULO 1: Fundamentos SELECT (4 lecciones = 28 min) - GRATIS**
Ã¯Â¿Â½Ã¯Â¿Â½ LecciÃ¯Â¿Â½n 1-1: SELECT bÃ¯Â¿Â½sico (7 min)
Ã¯Â¿Â½Ã¯Â¿Â½ LecciÃ¯Â¿Â½n 1-2: WHERE filtros (7 min)
Ã¯Â¿Â½Ã¯Â¿Â½ LecciÃ¯Â¿Â½n 1-3: ORDER BY y LIMIT (7 min)
Ã¯Â¿Â½Ã¯Â¿Â½ LecciÃ¯Â¿Â½n 1-4: DISTINCT y NULL (7 min)
Ã¯Â¿Â½Ã¯Â¿Â½ GATE M1: 8 preguntas (aprobar >70%)

**MÃ¯Â¿Â½DULO 2: JOINs (4 lecciones = 28 min) - PREMIUM**
Ã¯Â¿Â½Ã¯Â¿Â½ LecciÃ¯Â¿Â½n 2-1: Concepto de relaciones (7 min)
Ã¯Â¿Â½Ã¯Â¿Â½ LecciÃ¯Â¿Â½n 2-2: INNER JOIN (7 min)
Ã¯Â¿Â½Ã¯Â¿Â½ LecciÃ¯Â¿Â½n 2-3: LEFT JOIN (7 min)
Ã¯Â¿Â½Ã¯Â¿Â½ LecciÃ¯Â¿Â½n 2-4: Casos de uso marketing (7 min)
Ã¯Â¿Â½Ã¯Â¿Â½ GATE M2: 8 preguntas

**MÃ¯Â¿Â½DULO 3: Agregaciones (4 lecciones = 28 min) - PREMIUM**
Ã¯Â¿Â½Ã¯Â¿Â½ LecciÃ¯Â¿Â½n 3-1: COUNT y SUM (7 min)
Ã¯Â¿Â½Ã¯Â¿Â½ LecciÃ¯Â¿Â½n 3-2: AVG, MIN, MAX (7 min)
Ã¯Â¿Â½Ã¯Â¿Â½ LecciÃ¯Â¿Â½n 3-3: GROUP BY (7 min)
Ã¯Â¿Â½Ã¯Â¿Â½ LecciÃ¯Â¿Â½n 3-4: HAVING (7 min)
Ã¯Â¿Â½Ã¯Â¿Â½ GATE M3: 8 preguntas

**MÃ¯Â¿Â½DULO 4: Funciones (4 lecciones = 28 min) - PREMIUM**
Ã¯Â¿Â½Ã¯Â¿Â½ LecciÃ¯Â¿Â½n 4-1: DATE functions (7 min)
Ã¯Â¿Â½Ã¯Â¿Â½ LecciÃ¯Â¿Â½n 4-2: STRING functions (7 min)
Ã¯Â¿Â½Ã¯Â¿Â½ LecciÃ¯Â¿Â½n 4-3: CASE WHEN (7 min)
Ã¯Â¿Â½Ã¯Â¿Â½ LecciÃ¯Â¿Â½n 4-4: COALESCE, NULLIF (7 min)
Ã¯Â¿Â½Ã¯Â¿Â½ GATE M4: 8 preguntas

**MÃ¯Â¿Â½DULO 5: Subconsultas (3 lecciones = 21 min) - PREMIUM**
Ã¯Â¿Â½Ã¯Â¿Â½ LecciÃ¯Â¿Â½n 5-1: Subquery en WHERE (7 min)
Ã¯Â¿Â½Ã¯Â¿Â½ LecciÃ¯Â¿Â½n 5-2: Subquery en FROM (7 min)
Ã¯Â¿Â½Ã¯Â¿Â½ LecciÃ¯Â¿Â½n 5-3: EXISTS y NOT EXISTS (7 min)
Ã¯Â¿Â½Ã¯Â¿Â½ GATE M5: 8 preguntas

**MÃ¯Â¿Â½DULO 6: Window Functions (3 lecciones = 21 min) - PREMIUM**
Ã¯Â¿Â½Ã¯Â¿Â½ LecciÃ¯Â¿Â½n 6-1: ROW_NUMBER, RANK (7 min)
Ã¯Â¿Â½Ã¯Â¿Â½ LecciÃ¯Â¿Â½n 6-2: PARTITION BY (7 min)
Ã¯Â¿Â½Ã¯Â¿Â½ LecciÃ¯Â¿Â½n 6-3: LAG, LEAD (7 min)
Ã¯Â¿Â½Ã¯Â¿Â½ GATE M6: 8 preguntas

**MOCK FINAL: 10 preguntas tipo entrevista - PREMIUM**
**PDF CHEAT SHEET: 2 pÃ¯Â¿Â½ginas descargables - PREMIUM**

#### DistribuciÃ¯Â¿Â½n del banco de 100 preguntas:
- **10 preguntas:** CalibraciÃ¯Â¿Â½n inicial (M1-M2, nivel bÃ¯Â¿Â½sico)
- **48 preguntas:** Gates (6 mÃ¯Â¿Â½dulos Ã¯Â¿Â½ 8 preguntas)
- **10 preguntas:** Mock final (mix de todos los mÃ¯Â¿Â½dulos)
- **32 preguntas:** Pool de rotaciÃ¯Â¿Â½n (evitar memorizaciÃ¯Â¿Â½n)

#### Gates adaptativos:
- **Umbral de aprobaciÃ¯Â¿Â½n:** 70% (6/8 preguntas correctas)
- **Si aprueba:** Avanza al siguiente mÃ¯Â¿Â½dulo
- **Si no aprueba:** Opciones Ã¯Â¿Â½ Repasar mÃ¯Â¿Â½dulo, reintentar gate, ajustar dificultad

#### Archivo de contenido:
- **UbicaciÃ¯Â¿Â½n:** `content/sql-marketing/question-bank-es.json`
- **Total preguntas:** 100
- **Idioma:** EspaÃ¯Â¿Â½ol (LATAM)
- **ParÃ¯Â¿Â½metros IRT:** a (discriminaciÃ¯Â¿Â½n), b (dificultad), c (adivinaciÃ¯Â¿Â½n) incluidos
- **Tipos:** 80% multiple_choice, 10% true_false, 10% multiple_select
- **Contexto:** Ejemplos reales de marketing (campaÃ¯Â¿Â½as, segmentaciÃ¯Â¿Â½n, mÃ¯Â¿Â½tricas)

### Adaptativo:
* **Motor simple en servidor**: ability en 3..+3, +0.6 acierto / 0.5 error
* **Sin repetir subtema** consecutivo (variedad percibida)
* **Sin LLM durante test** (costo cero, velocidad mÃ¯Â¿Â½xima)

### LLM:
* **1 sola llamada** post-calibraciÃ¯Â¿Â½n para `recommendedOutline`
* **CachÃ¯Â¿Â½ agresivo** por `{courseId, level}`
* **Diffs por skillProfile** (no regenerar todo)

### Analytics:
* **GA4**: eventos FTUE, monetizaciÃ¯Â¿Â½n, latencias
* **Remote Config**: feature flags (panic_mode, paywall_variant)
* **Crashlytics + Performance**: monitoreo bÃ¯Â¿Â½sico
* **PostHog**: solo replay opcional (apagado por default)

### Notificaciones:
* **D+1**: recordatorio suave para continuar plan
* **T12h**: si usuario dijo que tiene fecha objetivo
* **Sin T90**: no agregamos presiÃ¯Â¿Â½n innecesaria en MVP

### MonetizaciÃ¯Â¿Â½n:
* **A/B Ã¯Â¿Â½nico**: ubicaciÃ¯Â¿Â½n de paywall (post-calibraciÃ¯Â¿Â½n vs. abrir bloque 2)
* **3 CTAs claros**: post-calibraciÃ¯Â¿Â½n, Mock, PDF
* **Trial 7 dÃ¯Â¿Â½as** sin pedir tarjeta upfront
* **Cobro**: solo en playstore por el momento; polÃ¯Â¿Â½ticas de tienda en apps

### QA/SLOs:
* Reanudar sesiÃ¯Â¿Â½n donde quedaste
* Bloquear "back" en test (no hacer trampa)
* Idempotencia en correcciÃ¯Â¿Â½n
* Crash-free e 99.5% en staging 24h antes de prod

## Modelo de negocio (freemium con trial)

* **Gratis**: calibraciÃ¯Â¿Â½n + 1er bloque (demostraciÃ¯Â¿Â½n de valor).
* **Trial 7 dÃ¯Â¿Â½as**: acceso completo + Mock + PDF (sin tarjeta).
* **Premium**: $4.99/mes (early bird) Ã¯Â¿Â½ $7.99/mes (despuÃ¯Â¿Â½s de 500 usuarios).
* **Paywall en 3 momentos** (ver flujo arriba).

## Stack (explicado sin jerga)

* **App**: Flutter (rÃ¯Â¿Â½pida y multiplataforma, iOS + Android).
* **Backend**: Firebase (login, Firestore, Functions, Storage).
* **Assessment API**: Express + Cloud Run (IRT adaptativo).
* **Mensajes**: FCM push + emails transaccionales (SendGrid/Postmark).
* **Sitio**: Landing y legal en pÃ¯Â¿Â½ginas estÃ¯Â¿Â½ticas rÃ¯Â¿Â½pidas (Astro/Next).
* **Pago**: RevenueCat para subscripciones (iOS + Android).

Todo pensado para **salir ya**, medir y mejorar con ingresos reales.


### Estado actual del stack
- âœ… App Flutter ejecuta calibraciÃ³n y AdaptiveJourneyScreen con LearnerState y mÃ³dulos on-demand.
- âœ… Backend Firebase ya valida schemas y guarda LearnerState + checkpoints adaptativos.
- âšªï¸ MensajerÃ­a (FCM/SendGrid) estable y monitorizada.
- âœ… Pagos Stripe + RevenueCat funcionando con trial y premium.

## Privacidad y confianza

* La calibraciÃ¯Â¿Â½n es solo para ajustar el nivel, no para juzgar.
* Guardamos el progreso para que retomes donde ibas.
* No compartimos respuestas correctas del banco de Ã¯Â¿Â½tems en el dispositivo.
* Cumplimos GDPR/CCPA bÃ¯Â¿Â½sico (borrado de datos, exportaciÃ¯Â¿Â½n).


### Estado de privacidad y confianza
- âœ… La calibraciÃ³n sigue siendo un diagnÃ³stico breve sin nota oficial y solo guardamos progresos.
- âœ… Existen procesos de borrado y exportaciÃ³n compatibles con GDPR/CCPA.
- âœ… No compartimos respuestas correctas; los logs solo registran tokens y uso validado.

## Riesgos identificados y cÃ¯Â¿Â½mo los mitigamos
### Estado actual de riesgos
- âœ… CalibraciÃ³n breve (6-10 preguntas) y feedback sin calificaciÃ³n visible.
- âš ï¸ placementQuizStart todavÃ­a cae en fallback al registrar OpenAI usage (moduleNumber undefined); estamos sanitizando los metadatos.
- ğŸŸ¡ ai_cache necesita invalidaciÃ³n tras fallback para evitar preguntas repetidas.
- âœ… El paywall y trial 7 dÃ­as estÃ¡n activos y solo habilitan mÃ³dulos superiores cuando corresponde.



### =Ã¯Â¿Â½ Riesgo: Usuario no completa calibraciÃ¯Â¿Â½n
**MitigaciÃ¯Â¿Â½n:**
- CalibraciÃ¯Â¿Â½n < 3 min (6-10 preguntas max)
- Progress bar visible en todo momento
- Sin nota visible (reduce ansiedad)
- Copy claro: "Esto NO es un examen"

### =Ã¯Â¿Â½ Riesgo: Contenido percibido como "muy fÃ¯Â¿Â½cil/difÃ¯Â¿Â½cil"
**MitigaciÃ¯Â¿Â½n:**
- Adaptativo ajusta en tiempo real (gates cada bloque)
- Feedback constante del nivel actual
- OpciÃ¯Â¿Â½n de "saltar bloque" si muy fÃ¯Â¿Â½cil
- OpciÃ¯Â¿Â½n de "repasar" si muy difÃ¯Â¿Â½cil

### =Ã¯Â¿Â½ Riesgo: TrialÃ¯Â¿Â½Pago bajo (<30%)
**MitigaciÃ¯Â¿Â½n:**
- Primer bloque gratis demuestra valor ANTES de paywall
- 3 CTAs estratÃ¯Â¿Â½gicos (no spam)
- Copy optimizado en paywall (beneficios > features)
- A/B test de timing basado en engagement
- Grandfathering para early adopters ($4.99 forever)

### =Ã¯Â¿Â½ Riesgo: Churn D7 alto (>35%)
**MitigaciÃ¯Â¿Â½n:**
- Notificaciones contextuales (no genÃ¯Â¿Â½ricas)
- Progress visible (motivaciÃ¯Â¿Â½n intrÃ¯Â¿Â½nseca)
- Modules cortos (3-4 min, momentum constante)
- Siguiente paso siempre claro

### =Ã¯Â¿Â½ Riesgo: Performance lenta (>4s)
**MitigaciÃ¯Â¿Â½n:**
- Skeleton loading (feedback inmediato)
- CachÃ¯Â¿Â½ agresivo de LLM
- Plan rendering en background
- Monitoreo con Firebase Performance

## Hoja de ruta inmediata (5 dÃ¯Â¿Â½as para lanzar)

### DÃ¯Â¿Â½a 1: CONTENIDO
- [ ] 100 preguntas SQL para Marketing
- [ ] Estructura 6 mÃ¯Â¿Â½dulos bÃ¯Â¿Â½sicos
- [ ] Mock exam (10 preguntas)
- [ ] ParÃ¯Â¿Â½metros IRT aproximados

### DÃ¯Â¿Â½a 2: INTEGRACIÃ¯Â¿Â½N
- [ ] Cargar banco en server/assessment.js
- [ ] Flujo calibraciÃ¯Â¿Â½n Ã¯Â¿Â½ plan Ã¯Â¿Â½ gate E2E
- [ ] Health check del flujo completo

### DÃ¯Â¿Â½a 3: PAYWALL
- [ ] Modal paywall simple (M1 gratis, resto bloqueado)
- [ ] Trial 7 dÃ¯Â¿Â½as + RevenueCat bÃ¯Â¿Â½sico
- [ ] 3 CTAs (post-calibraciÃ¯Â¿Â½n, Mock, PDF)

### DÃ¯Â¿Â½a 4: POLISH MÃ¯Â¿Â½NIMO
- [ ] Smoke tests bÃ¯Â¿Â½sicos
- [ ] GA4 eventos crÃ¯Â¿Â½ticos
- [ ] Crashlytics funcionando
- [ ] README con screenshots

### DÃ¯Â¿Â½a 5: LANZAR
- [ ] TestFlight/Internal testing (20 usuarios)
- [ ] Landing page mÃ¯Â¿Â½nima
- [ ] MÃ¯Â¿Â½tricas dashboard
- [ ] LANZAR =Ã¯Â¿Â½

## Lo que NO somos (para evitar desvÃ¯Â¿Â½os)

L **NO somos** Netflix de cursos (no acumules, avanza)
L **NO somos** un examen o test de conocimiento (no te juzgamos)
L **NO prometemos** "experto en 7 dÃ¯Â¿Â½as" (realismo > hype)
L **NO hacemos** gamificaciÃ¯Â¿Â½n forzada (progreso real > badges vacÃ¯Â¿Â½os)
L **NO vendemos** certificados oficiales (vendemos skills aplicables)
L **NO reemplazamos** prÃ¯Â¿Â½ctica real (te preparamos para ella)
L **NO somos** para curiosos casuales (para profesionales con objetivo claro)

## Tono y valores (cÃ¯Â¿Â½mo hablamos)

### Principios de comunicaciÃ¯Â¿Â½n:
1. **Claro > Clever**
    "Aprende SQL en 3 semanas"
   L "Desbloquea tu potencial data-driven"

2. **Ã¯Â¿Â½til > Inspiracional**
    "Siguiente mÃ¯Â¿Â½dulo: JOIN queries (3 min)"
   L "Ã¯Â¿Â½Sigue tu viaje de aprendizaje! =Ã¯Â¿Â½"

3. **Progreso visible > GamificaciÃ¯Â¿Â½n**
    "4/12 mÃ¯Â¿Â½dulos completados"
   L "Ã¯Â¿Â½Ganaste 500 puntos y subiste de nivel!"

4. **Realista > Promesas exageradas**
    "En 2-3 semanas tendrÃ¯Â¿Â½s las bases sÃ¯Â¿Â½lidas"
   L "ConviÃ¯Â¿Â½rtete en experto en 7 dÃ¯Â¿Â½as"

### Copy guidelines:
- Sin jerga innecesaria (habla como humano)
- Verbos de acciÃ¯Â¿Â½n en CTAs ("Empezar plan" no "Continuar")
- Beneficios antes que features ("Aprende SQL" no "Accede a 100 preguntas")
- Siempre mostrar progreso + siguiente paso
- Usar "tÃ¯Â¿Â½" no "usted" (cercano pero profesional)

## CÃ¯Â¿Â½mo usar este documento

### Para devs/diseÃ¯Â¿Â½ers:
Lee esto primero Ã¯Â¿Â½ entiendes el contexto completo Ã¯Â¿Â½ contribuyes alineado

### Para IAs (Codex/ChatGPT/Claude):
"Lee docs/Context_edaptia.md y dame X segÃ¯Â¿Â½n estos principios"

### Para decisiones:
Ã¯Â¿Â½Agregar feature X? Ã¯Â¿Â½ Consulta "Principios no-negociables" + "Lo que NO somos"

### Para pitch:
SecciÃ¯Â¿Â½n "QuÃ¯Â¿Â½ es" + "Propuesta de valor" = elevator pitch de 2 min

---

## Estado actual del proyecto

**Infraestructura:**  COMPLETADA
- Seguridad: 9/10 (Firebase Auth + Secret Manager)
- Deployment: 9/10 (Assessment API en Cloud Run)
- Backend: Express + Firestore + IRT funcionando

**Bloqueadores crÃ¯Â¿Â½ticos para lanzar:**
1.  Contenido: 100/100 preguntas SQL - COMPLETADO (DÃ¯Â¿Â½A 1)
2. L Paywall UI: sin gating implementado
3. L Flujo E2E: calibraciÃ¯Â¿Â½n Ã¯Â¿Â½ plan Ã¯Â¿Â½ gate sin probar completo

**Siguiente paso inmediato:** Integrar banco de preguntas en server/assessment.js (DÃ¯Â¿Â½A 2)

---

**Ã¯Â¿Â½ltima actualizaciÃ¯Â¿Â½n:** 2025-01-04
**VersiÃ¯Â¿Â½n:** 2.2 (DÃ¯Â¿Â½A 1 completado - banco de 100 preguntas SQL integrado)
**PrÃ¯Â¿Â½xima revisiÃ¯Â¿Â½n:** DespuÃ¯Â¿Â½s de DÃ¯Â¿Â½A 2 (integraciÃ¯Â¿Â½n backend)
## Ahora: contexto actual de Edaptia
- La aplicación corre sobre Flutter + Firebase + funciones generativas en Node.js; el flujo adaptativo usa LearnerState y genera módulos/checkpoints con GPT-4o.
- El backend registra cada respuesta en Firestore, incluye `openai_usage` y `ai_cache`, mientras el frontend coordina AdaptiveJourneyScreen y el streak.
- Estamos tratando que `placementQuizStart` registre en vivo las preguntas sin caer en el fallback, saneando `logOpenAiUsage` para evitar campos `undefined`.

## Contexto operativo de la app
- Home dispara el quiz de calibración y luego abre AdaptiveJourneyScreen que escucha `users/{uid}/adaptiveState/summary` para reflejar progreso y generar contenido on-demand.
- Las funciones adaptativas (`adaptivePlanDraft`, `adaptiveModuleGenerate`, `adaptiveCheckpointQuiz`, `adaptiveBooster`) están en `functions/src/generative-endpoints.ts` y usan `openai-service.ts` con esquemas AJV para validar cada respuesta.
- El flujo depende del estado de entitlements/premium y la racha diaria; cada fallback incrementa la carga de tokens y degrada la experiencia.

## Problemas actuales a resolver (2e2 forense)
1. `placementQuizStart` sigue cayendo en `source: curated-fallback` porque Firestore rechaza `openai_usage` con `moduleNumber: undefined`; debemos sanitizar los metadatos.
2. `ai_cache` puede devolver preguntas repetidas; necesitamos invalidar la entrada cuando detectamos un fallback y forzar nueva generación.
3. Debemos reforzar los logs de Cloud Run/Functions para distinguir entre errores de validación (Firestore) y fallos reales de OpenAI.
4. La UI Flutter aborta después de 25 s si la API responde lento; aunque aumentamos el timeout a 45 s, tenemos que asegurar que el quiz llega antes del gasto del fallback.

## Próximos pasos urgentes
- Garantizar que `logOpenAiUsage` elimina campos `undefined` y revisa todos los metadatos que escribe.
- Invalidar el cache `ai_cache` cuando `placementQuizStart` detecta fallback para obligar regeneración con OpenAI.
- Documentar el comportamiento en los nuevos documentos de auditoría y mantener el seguimiento 2e2.
